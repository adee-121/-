// استدعاء النموذج وقائمة السجلات
const form = document.getElementById("booking-form");
const recordsList = document.getElementById("booking-records");

// استرجاع السجلات من Local Storage
function loadRecords() {
  const records = JSON.parse(localStorage.getItem("bookings")) || [];
  recordsList.innerHTML = ""; // تنظيف القائمة قبل العرض
  records.forEach((record, index) => {
    const li = document.createElement("li");
    li.textContent = `الاسم: ${record.name}, الهاتف: ${record.phone}, الخدمة: ${record.service}, التاريخ: ${record.date}`;
    const deleteButton = document.createElement("button");
    deleteButton.textContent = "حذف";
    deleteButton.onclick = () => deleteRecord(index);
    li.appendChild(deleteButton);
    recordsList.appendChild(li);
  });
}

// حذف سجل معين
function deleteRecord(index) {
  const records = JSON.parse(localStorage.getItem("bookings")) || [];
  records.splice(index, 1);
  localStorage.setItem("bookings", JSON.stringify(records));
  loadRecords();
}

// حفظ سجل جديد
form.addEventListener("submit", (e) => {
  e.preventDefault(); // منع إعادة تحميل الصفحة
  const name = document.getElementById("name").value;
  const phone = document.getElementById("phone").value;
  const service = document.getElementById("service").value;
  const date = document.getElementById("date").value;

  const newBooking = { name, phone, service, date };
  const bookings = JSON.parse(localStorage.getItem("bookings")) || [];
  bookings.push(newBooking);
  localStorage.setItem("bookings", JSON.stringify(bookings));

  alert("تم تسجيل الحجز بنجاح!");
  form.reset();
  loadRecords();
});

// تحميل السجلات عند فتح الصفحة
loadRecords();
